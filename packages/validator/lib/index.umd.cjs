(function(u,E){typeof exports=="object"&&typeof module<"u"?E(exports):typeof define=="function"&&define.amd?define(["exports"],E):(u=typeof globalThis<"u"?globalThis:u||self,E(u.validator={}))})(this,function(u){"use strict";class E extends Error{}class wt extends Error{}const x=({x:t,y:e})=>`(${t}, ${e})`;var At=typeof global=="object"&&global&&global.Object===Object&&global,Se=typeof self=="object"&&self&&self.Object===Object&&self,b=At||Se||Function("return this")(),O=b.Symbol,Tt=Object.prototype,Ie=Tt.hasOwnProperty,Ce=Tt.toString,D=O?O.toStringTag:void 0;function Re(t){var e=Ie.call(t,D),r=t[D];try{t[D]=void 0;var n=!0}catch{}var i=Ce.call(t);return n&&(e?t[D]=r:delete t[D]),i}var Me=Object.prototype,je=Me.toString;function Le(t){return je.call(t)}var Ne="[object Null]",De="[object Undefined]",Ot=O?O.toStringTag:void 0;function j(t){return t==null?t===void 0?De:Ne:Ot&&Ot in Object(t)?Re(t):Le(t)}function P(t){return t!=null&&typeof t=="object"}var Fe="[object Symbol]";function H(t){return typeof t=="symbol"||P(t)&&j(t)==Fe}function Pt(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var v=Array.isArray,ze=1/0,mt=O?O.prototype:void 0,$t=mt?mt.toString:void 0;function Et(t){if(typeof t=="string")return t;if(v(t))return Pt(t,Et)+"";if(H(t))return $t?$t.call(t):"";var e=t+"";return e=="0"&&1/t==-ze?"-0":e}var Ge=/\s/;function Be(t){for(var e=t.length;e--&&Ge.test(t.charAt(e)););return e}var He=/^\s+/;function Ue(t){return t&&t.slice(0,Be(t)+1).replace(He,"")}function L(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var xt=NaN,Ke=/^[-+]0x[0-9a-f]+$/i,Xe=/^0b[01]+$/i,Ye=/^0o[0-7]+$/i,We=parseInt;function qe(t){if(typeof t=="number")return t;if(H(t))return xt;if(L(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=L(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Ue(t);var r=Xe.test(t);return r||Ye.test(t)?We(t.slice(2),r?2:8):Ke.test(t)?xt:+t}var St=1/0,Ze=17976931348623157e292;function Je(t){if(!t)return t===0?t:0;if(t=qe(t),t===St||t===-St){var e=t<0?-1:1;return e*Ze}return t===t?t:0}function It(t){var e=Je(t),r=e%1;return e===e?r?e-r:e:0}function U(t){return t}var Qe="[object AsyncFunction]",Ve="[object Function]",ke="[object GeneratorFunction]",tr="[object Proxy]";function Ct(t){if(!L(t))return!1;var e=j(t);return e==Ve||e==ke||e==Qe||e==tr}var rt=b["__core-js_shared__"],Rt=function(){var t=/[^.]+$/.exec(rt&&rt.keys&&rt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function er(t){return!!Rt&&Rt in t}var rr=Function.prototype,nr=rr.toString;function S(t){if(t!=null){try{return nr.call(t)}catch{}try{return t+""}catch{}}return""}var ir=/[\\^$.*+?()[\]{}|]/g,ar=/^\[object .+?Constructor\]$/,sr=Function.prototype,or=Object.prototype,ur=sr.toString,fr=or.hasOwnProperty,cr=RegExp("^"+ur.call(fr).replace(ir,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function lr(t){if(!L(t)||er(t))return!1;var e=Ct(t)?cr:ar;return e.test(S(t))}function hr(t,e){return t==null?void 0:t[e]}function I(t,e){var r=hr(t,e);return lr(r)?r:void 0}var nt=I(b,"WeakMap"),Mt=Object.create,jt=function(){function t(){}return function(e){if(!L(e))return{};if(Mt)return Mt(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();function pr(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function it(){}var dr=4294967295;function F(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=dr,this.__views__=[]}F.prototype=jt(it.prototype),F.prototype.constructor=F;function N(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}N.prototype=jt(it.prototype),N.prototype.constructor=N;function _r(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}function gr(t){if(t instanceof F)return t.clone();var e=new N(t.__wrapped__,t.__chain__);return e.__actions__=_r(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var yr=Object.prototype,vr=yr.hasOwnProperty;function K(t){if(P(t)&&!v(t)&&!(t instanceof F)){if(t instanceof N)return t;if(vr.call(t,"__wrapped__"))return gr(t)}return new N(t)}K.prototype=it.prototype,K.prototype.constructor=K;var br=800,wr=16,Ar=Date.now;function Tr(t){var e=0,r=0;return function(){var n=Ar(),i=wr-(n-r);if(r=n,i>0){if(++e>=br)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Or(t){return function(){return t}}var Lt=function(){try{var t=I(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Pr=Lt?function(t,e){return Lt(t,"toString",{configurable:!0,enumerable:!1,value:Or(e),writable:!0})}:U,mr=Tr(Pr);function $r(t,e,r,n){for(var i=t.length,a=r+-1;++a<i;)if(e(t[a],a,t))return a;return-1}var Er=9007199254740991,xr=/^(?:0|[1-9]\d*)$/;function Nt(t,e){var r=typeof t;return e=e??Er,!!e&&(r=="number"||r!="symbol"&&xr.test(t))&&t>-1&&t%1==0&&t<e}function Dt(t,e){return t===e||t!==t&&e!==e}var Ft=Math.max;function Sr(t,e,r){return e=Ft(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,a=Ft(n.length-e,0),s=Array(a);++i<a;)s[i]=n[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=n[i];return o[e]=r(s),pr(t,this,o)}}function Ir(t,e){return mr(Sr(t,e,U),t+"")}var Cr=9007199254740991;function at(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Cr}function X(t){return t!=null&&at(t.length)&&!Ct(t)}var Rr=Object.prototype;function Mr(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Rr;return t===r}function st(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var jr="[object Arguments]";function zt(t){return P(t)&&j(t)==jr}var Gt=Object.prototype,Lr=Gt.hasOwnProperty,Nr=Gt.propertyIsEnumerable,Bt=zt(function(){return arguments}())?zt:function(t){return P(t)&&Lr.call(t,"callee")&&!Nr.call(t,"callee")};function Dr(){return!1}var Ht=typeof u=="object"&&u&&!u.nodeType&&u,Ut=Ht&&typeof module=="object"&&module&&!module.nodeType&&module,Fr=Ut&&Ut.exports===Ht,Kt=Fr?b.Buffer:void 0,zr=Kt?Kt.isBuffer:void 0,ot=zr||Dr,Gr="[object Arguments]",Br="[object Array]",Hr="[object Boolean]",Ur="[object Date]",Kr="[object Error]",Xr="[object Function]",Yr="[object Map]",Wr="[object Number]",qr="[object Object]",Zr="[object RegExp]",Jr="[object Set]",Qr="[object String]",Vr="[object WeakMap]",kr="[object ArrayBuffer]",tn="[object DataView]",en="[object Float32Array]",rn="[object Float64Array]",nn="[object Int8Array]",an="[object Int16Array]",sn="[object Int32Array]",on="[object Uint8Array]",un="[object Uint8ClampedArray]",fn="[object Uint16Array]",cn="[object Uint32Array]",l={};l[en]=l[rn]=l[nn]=l[an]=l[sn]=l[on]=l[un]=l[fn]=l[cn]=!0,l[Gr]=l[Br]=l[kr]=l[Hr]=l[tn]=l[Ur]=l[Kr]=l[Xr]=l[Yr]=l[Wr]=l[qr]=l[Zr]=l[Jr]=l[Qr]=l[Vr]=!1;function ln(t){return P(t)&&at(t.length)&&!!l[j(t)]}function hn(t){return function(e){return t(e)}}var Xt=typeof u=="object"&&u&&!u.nodeType&&u,z=Xt&&typeof module=="object"&&module&&!module.nodeType&&module,pn=z&&z.exports===Xt,ut=pn&&At.process,Yt=function(){try{var t=z&&z.require&&z.require("util").types;return t||ut&&ut.binding&&ut.binding("util")}catch{}}(),Wt=Yt&&Yt.isTypedArray,qt=Wt?hn(Wt):ln,dn=Object.prototype,_n=dn.hasOwnProperty;function gn(t,e){var r=v(t),n=!r&&Bt(t),i=!r&&!n&&ot(t),a=!r&&!n&&!i&&qt(t),s=r||n||i||a,o=s?st(t.length,String):[],c=o.length;for(var f in t)_n.call(t,f)&&!(s&&(f=="length"||i&&(f=="offset"||f=="parent")||a&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||Nt(f,c)))&&o.push(f);return o}function yn(t,e){return function(r){return t(e(r))}}var vn=yn(Object.keys,Object),bn=Object.prototype,wn=bn.hasOwnProperty;function An(t){if(!Mr(t))return vn(t);var e=[];for(var r in Object(t))wn.call(t,r)&&r!="constructor"&&e.push(r);return e}function Y(t){return X(t)?gn(t):An(t)}var Tn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,On=/^\w*$/;function ft(t,e){if(v(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||H(t)?!0:On.test(t)||!Tn.test(t)||e!=null&&t in Object(e)}var G=I(Object,"create");function Pn(){this.__data__=G?G(null):{},this.size=0}function mn(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var $n="__lodash_hash_undefined__",En=Object.prototype,xn=En.hasOwnProperty;function Sn(t){var e=this.__data__;if(G){var r=e[t];return r===$n?void 0:r}return xn.call(e,t)?e[t]:void 0}var In=Object.prototype,Cn=In.hasOwnProperty;function Rn(t){var e=this.__data__;return G?e[t]!==void 0:Cn.call(e,t)}var Mn="__lodash_hash_undefined__";function jn(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=G&&e===void 0?Mn:e,this}function C(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}C.prototype.clear=Pn,C.prototype.delete=mn,C.prototype.get=Sn,C.prototype.has=Rn,C.prototype.set=jn;function Ln(){this.__data__=[],this.size=0}function W(t,e){for(var r=t.length;r--;)if(Dt(t[r][0],e))return r;return-1}var Nn=Array.prototype,Dn=Nn.splice;function Fn(t){var e=this.__data__,r=W(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Dn.call(e,r,1),--this.size,!0}function zn(t){var e=this.__data__,r=W(e,t);return r<0?void 0:e[r][1]}function Gn(t){return W(this.__data__,t)>-1}function Bn(t,e){var r=this.__data__,n=W(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function w(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}w.prototype.clear=Ln,w.prototype.delete=Fn,w.prototype.get=zn,w.prototype.has=Gn,w.prototype.set=Bn;var B=I(b,"Map");function Hn(){this.size=0,this.__data__={hash:new C,map:new(B||w),string:new C}}function Un(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function q(t,e){var r=t.__data__;return Un(e)?r[typeof e=="string"?"string":"hash"]:r.map}function Kn(t){var e=q(this,t).delete(t);return this.size-=e?1:0,e}function Xn(t){return q(this,t).get(t)}function Yn(t){return q(this,t).has(t)}function Wn(t,e){var r=q(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function A(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}A.prototype.clear=Hn,A.prototype.delete=Kn,A.prototype.get=Xn,A.prototype.has=Yn,A.prototype.set=Wn;var qn="Expected a function";function ct(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(qn);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var s=t.apply(this,n);return r.cache=a.set(i,s)||a,s};return r.cache=new(ct.Cache||A),r}ct.Cache=A;var Zn=500;function Jn(t){var e=ct(t,function(n){return r.size===Zn&&r.clear(),n}),r=e.cache;return e}var Qn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Vn=/\\(\\)?/g,kn=Jn(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Qn,function(r,n,i,a){e.push(i?a.replace(Vn,"$1"):n||r)}),e});function ti(t){return t==null?"":Et(t)}function Zt(t,e){return v(t)?t:ft(t,e)?[t]:kn(ti(t))}var ei=1/0;function Z(t){if(typeof t=="string"||H(t))return t;var e=t+"";return e=="0"&&1/t==-ei?"-0":e}function Jt(t,e){e=Zt(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[Z(e[r++])];return r&&r==n?t:void 0}function ri(t,e,r){var n=t==null?void 0:Jt(t,e);return n===void 0?r:n}function ni(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}function Qt(t){var e=K(t);return e.__chain__=!0,e}function ii(){this.__data__=new w,this.size=0}function ai(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function si(t){return this.__data__.get(t)}function oi(t){return this.__data__.has(t)}var ui=200;function fi(t,e){var r=this.__data__;if(r instanceof w){var n=r.__data__;if(!B||n.length<ui-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new A(n)}return r.set(t,e),this.size=r.size,this}function T(t){var e=this.__data__=new w(t);this.size=e.size}T.prototype.clear=ii,T.prototype.delete=ai,T.prototype.get=si,T.prototype.has=oi,T.prototype.set=fi;function Vt(t,e){for(var r=-1,n=t==null?0:t.length,i=0,a=[];++r<n;){var s=t[r];e(s,r,t)&&(a[i++]=s)}return a}function ci(){return[]}var li=Object.prototype,hi=li.propertyIsEnumerable,kt=Object.getOwnPropertySymbols,pi=kt?function(t){return t==null?[]:(t=Object(t),Vt(kt(t),function(e){return hi.call(t,e)}))}:ci;function di(t,e,r){var n=e(t);return v(t)?n:ni(n,r(t))}function te(t){return di(t,Y,pi)}var lt=I(b,"DataView"),ht=I(b,"Promise"),pt=I(b,"Set"),ee="[object Map]",_i="[object Object]",re="[object Promise]",ne="[object Set]",ie="[object WeakMap]",ae="[object DataView]",gi=S(lt),yi=S(B),vi=S(ht),bi=S(pt),wi=S(nt),m=j;(lt&&m(new lt(new ArrayBuffer(1)))!=ae||B&&m(new B)!=ee||ht&&m(ht.resolve())!=re||pt&&m(new pt)!=ne||nt&&m(new nt)!=ie)&&(m=function(t){var e=j(t),r=e==_i?t.constructor:void 0,n=r?S(r):"";if(n)switch(n){case gi:return ae;case yi:return ee;case vi:return re;case bi:return ne;case wi:return ie}return e});var se=b.Uint8Array,Ai="__lodash_hash_undefined__";function Ti(t){return this.__data__.set(t,Ai),this}function Oi(t){return this.__data__.has(t)}function J(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new A;++e<r;)this.add(t[e])}J.prototype.add=J.prototype.push=Ti,J.prototype.has=Oi;function oe(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function Pi(t,e){return t.has(e)}var mi=1,$i=2;function ue(t,e,r,n,i,a){var s=r&mi,o=t.length,c=e.length;if(o!=c&&!(s&&c>o))return!1;var f=a.get(t),d=a.get(e);if(f&&d)return f==e&&d==t;var p=-1,h=!0,_=r&$i?new J:void 0;for(a.set(t,e),a.set(e,t);++p<o;){var g=t[p],y=e[p];if(n)var $=s?n(y,g,p,e,t,a):n(g,y,p,t,e,a);if($!==void 0){if($)continue;h=!1;break}if(_){if(!oe(e,function(R,M){if(!Pi(_,M)&&(g===R||i(g,R,r,n,a)))return _.push(M)})){h=!1;break}}else if(!(g===y||i(g,y,r,n,a))){h=!1;break}}return a.delete(t),a.delete(e),h}function Ei(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}function xi(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var Si=1,Ii=2,Ci="[object Boolean]",Ri="[object Date]",Mi="[object Error]",ji="[object Map]",Li="[object Number]",Ni="[object RegExp]",Di="[object Set]",Fi="[object String]",zi="[object Symbol]",Gi="[object ArrayBuffer]",Bi="[object DataView]",fe=O?O.prototype:void 0,dt=fe?fe.valueOf:void 0;function Hi(t,e,r,n,i,a,s){switch(r){case Bi:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Gi:return!(t.byteLength!=e.byteLength||!a(new se(t),new se(e)));case Ci:case Ri:case Li:return Dt(+t,+e);case Mi:return t.name==e.name&&t.message==e.message;case Ni:case Fi:return t==e+"";case ji:var o=Ei;case Di:var c=n&Si;if(o||(o=xi),t.size!=e.size&&!c)return!1;var f=s.get(t);if(f)return f==e;n|=Ii,s.set(t,e);var d=ue(o(t),o(e),n,i,a,s);return s.delete(t),d;case zi:if(dt)return dt.call(t)==dt.call(e)}return!1}var Ui=1,Ki=Object.prototype,Xi=Ki.hasOwnProperty;function Yi(t,e,r,n,i,a){var s=r&Ui,o=te(t),c=o.length,f=te(e),d=f.length;if(c!=d&&!s)return!1;for(var p=c;p--;){var h=o[p];if(!(s?h in e:Xi.call(e,h)))return!1}var _=a.get(t),g=a.get(e);if(_&&g)return _==e&&g==t;var y=!0;a.set(t,e),a.set(e,t);for(var $=s;++p<c;){h=o[p];var R=t[h],M=e[h];if(n)var xe=s?n(M,R,h,e,t,a):n(R,M,h,t,e,a);if(!(xe===void 0?R===M||i(R,M,r,n,a):xe)){y=!1;break}$||($=h=="constructor")}if(y&&!$){var tt=t.constructor,et=e.constructor;tt!=et&&"constructor"in t&&"constructor"in e&&!(typeof tt=="function"&&tt instanceof tt&&typeof et=="function"&&et instanceof et)&&(y=!1)}return a.delete(t),a.delete(e),y}var Wi=1,ce="[object Arguments]",le="[object Array]",Q="[object Object]",qi=Object.prototype,he=qi.hasOwnProperty;function Zi(t,e,r,n,i,a){var s=v(t),o=v(e),c=s?le:m(t),f=o?le:m(e);c=c==ce?Q:c,f=f==ce?Q:f;var d=c==Q,p=f==Q,h=c==f;if(h&&ot(t)){if(!ot(e))return!1;s=!0,d=!1}if(h&&!d)return a||(a=new T),s||qt(t)?ue(t,e,r,n,i,a):Hi(t,e,c,r,n,i,a);if(!(r&Wi)){var _=d&&he.call(t,"__wrapped__"),g=p&&he.call(e,"__wrapped__");if(_||g){var y=_?t.value():t,$=g?e.value():e;return a||(a=new T),i(y,$,r,n,a)}}return h?(a||(a=new T),Yi(t,e,r,n,i,a)):!1}function _t(t,e,r,n,i){return t===e?!0:t==null||e==null||!P(t)&&!P(e)?t!==t&&e!==e:Zi(t,e,r,n,_t,i)}var Ji=1,Qi=2;function Vi(t,e,r,n){var i=r.length,a=i;if(t==null)return!a;for(t=Object(t);i--;){var s=r[i];if(s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<a;){s=r[i];var o=s[0],c=t[o],f=s[1];if(s[2]){if(c===void 0&&!(o in t))return!1}else{var d=new T,p;if(!(p===void 0?_t(f,c,Ji|Qi,n,d):p))return!1}}return!0}function pe(t){return t===t&&!L(t)}function ki(t){for(var e=Y(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,pe(i)]}return e}function de(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}function ta(t){var e=ki(t);return e.length==1&&e[0][2]?de(e[0][0],e[0][1]):function(r){return r===t||Vi(r,t,e)}}function ea(t,e){return t!=null&&e in Object(t)}function ra(t,e,r){e=Zt(e,t);for(var n=-1,i=e.length,a=!1;++n<i;){var s=Z(e[n]);if(!(a=t!=null&&r(t,s)))break;t=t[s]}return a||++n!=i?a:(i=t==null?0:t.length,!!i&&at(i)&&Nt(s,i)&&(v(t)||Bt(t)))}function na(t,e){return t!=null&&ra(t,e,ea)}var ia=1,aa=2;function sa(t,e){return ft(t)&&pe(e)?de(Z(t),e):function(r){var n=ri(r,t);return n===void 0&&n===e?na(r,t):_t(e,n,ia|aa)}}function _e(t){return function(e){return e==null?void 0:e[t]}}function oa(t){return function(e){return Jt(e,t)}}function ua(t){return ft(t)?_e(Z(t)):oa(t)}function gt(t){return typeof t=="function"?t:t==null?U:typeof t=="object"?v(t)?sa(t[0],t[1]):ta(t):ua(t)}function fa(t){return function(e,r,n){for(var i=-1,a=Object(e),s=n(e),o=s.length;o--;){var c=s[++i];if(r(a[c],c,a)===!1)break}return e}}var ca=fa();function la(t,e){return t&&ca(t,e,Y)}function ha(t,e){return function(r,n){if(r==null)return r;if(!X(r))return t(r,n);for(var i=r.length,a=-1,s=Object(r);++a<i&&n(s[a],a,s)!==!1;);return r}}var pa=ha(la);function da(t){return P(t)&&X(t)}function _a(t){return typeof t=="function"?t:U}function ga(t){return function(e,r,n){var i=Object(e);if(!X(e)){var a=gt(r);e=Y(e),r=function(o){return a(i[o],o,i)}}var s=t(e,r,n);return s>-1?i[a?e[s]:s]:void 0}}var ya=Math.max;function va(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=r==null?0:It(r);return i<0&&(i=ya(n+i,0)),$r(t,gt(e),i)}var yt=ga(va);function ba(t,e){var r;return pa(t,function(n,i,a){return r=e(n,i,a),!r}),!!r}function wa(t,e,r){var n=v(t)?oe:ba;return n(t,gt(e))}var Aa=9007199254740991,vt=4294967295,Ta=Math.min;function Oa(t,e){if(t=It(t),t<1||t>Aa)return[];var r=vt,n=Ta(t,vt);e=_a(e),t-=vt;for(var i=st(n,e);++r<t;)e(r);return i}var Pa=Math.max;function ma(t){if(!(t&&t.length))return[];var e=0;return t=Vt(t,function(r){if(da(r))return e=Pa(r.length,e),!0}),st(e,function(r){return Pt(t,_e(r))})}var ge=Ir(ma);function ye({next:t}){return Qt(t).countBy(x).values().find(r=>r>1).value()?{errors:["agent-to-agent direct collision"]}:{}}function $a({next:t,domain:e}){return yt(t,({x:n,y:i})=>e.cells[i][n])?{errors:["agent collision with environment"]}:{}}function ve({actions:t,next:e,prev:r}){const n=Qt(r).map((a,s)=>({agent:s,point:a,action:t[s]})).keyBy(({point:a})=>x(a)).value();return yt(e,(a,s)=>x(a)in n?t[s]!==n[x(a)].action:!1)?{errors:["agent-to-agent edge collision"]}:{}}function Ea({current:t,goals:e}){return yt(ge(t,e),([n,i])=>x(n)!==x(i))?{errors:["agent did not reach goal"]}:{}}class xa{constructor(e){this.item=e}next(){const e=this.item;return e?(this.item=e.next,{value:e,done:!1}):{value:null,done:!0}}}class V{constructor(){this.next,this.prev,this.list}append(e){const r=this.list;if(!e||!e.append||!e.prepend||!e.detach)throw new Error("An argument without append, prepend, or detach methods was given to `Item#append`.");return!r||this===e?!1:(e.detach(),this.next&&(e.next=this.next,this.next.prev=e),e.prev=this,e.list=r,this.next=e,(this===r.tail||!r.tail)&&(r.tail=e),r.size++,e)}prepend(e){const r=this.list;if(!e||!e.append||!e.prepend||!e.detach)throw new Error("An argument without append, prepend, or detach methods was given to `Item#prepend`.");return!r||this===e?!1:(e.detach(),this.prev&&(e.prev=this.prev,this.prev.next=e),e.next=this,e.list=r,this.prev=e,this===r.head&&(r.head=e),r.tail||(r.tail=this),r.size++,e)}detach(){const e=this.list;return e?(e.tail===this&&(e.tail=this.prev),e.head===this&&(e.head=this.next),e.tail===e.head&&(e.tail=null),this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=null,this.next=null,this.list=null,e.size--,this):this}}V.prototype.next=null,V.prototype.prev=null,V.prototype.list=null;class k{static from(e){const r=new this;return bt(r,e)}static of(...e){const r=new this;return bt(r,e)}constructor(...e){this.size,this.head,this.tail,bt(this,e)}append(e){if(!e)return!1;if(!e.append||!e.prepend||!e.detach)throw new Error("An argument without append, prepend, or detach methods was given to `List#append`.");return this.tail?this.tail.append(e):this.head?this.head.append(e):(e.detach(),e.list=this,this.head=e,this.size++,e)}prepend(e){if(!e)return!1;if(!e.append||!e.prepend||!e.detach)throw new Error("An argument without append, prepend, or detach methods was given to `List#prepend`.");return this.head?this.head.prepend(e):(e.detach(),e.list=this,this.head=e,this.size++,e)}toArray(){let e=this.head;const r=[];for(;e;)r.push(e),e=e.next;return r}[Symbol.iterator](){return new xa(this.head)}}k.prototype.size=0,k.prototype.tail=null,k.prototype.head=null;function bt(t,e){if(!e)return t;if(e[Symbol.iterator]){const r=e[Symbol.iterator]();let n;for(;(n=r.next())&&!n.done;)t.append(n.value)}else{let r=-1;for(;++r<e.length;){const n=e[r];t.append(n)}}return t}class be extends V{constructor(e,r,n){super(),this.count=e,this.symbol=r,this.offset=n}}class we{constructor(e){this.offset=0,this.chunks=e.matchAll(/(\d*)([a-z])/g)}read(){const{value:e,done:r}=this.chunks.next();if(r)throw new E;{const[n,i,a]=e,s=i?+i:1,o=new be(s,a,this.offset);return this.offset+=s,o}}}class Ae{constructor(e,r=2){this.reader=e,this.history=r,this.cache=new k,this.current=e.read(),this.cache.append(this.current)}prune(){let e=this.current;Oa(this.history,()=>this.current.prev&&(e=this.current.prev)),e.prev&&(e.prev=null)}seek(e){switch(Te(e,this.current)){case"in-range":return this.current.symbol;case"low":{if(this.current.prev)return this.current=this.current.prev,this.seek(e);throw new wt}case"high":return this.current.next?(this.history!==-1&&this.prune(),this.current=this.current.next,this.seek(e)):(this.cache.append(this.reader.read()),this.seek(e))}}}function Te(t,e){const r=e.offset,n=e.offset+e.count;return t<r?"low":r<=t&&t<n?"in-range":"high"}function Oe(t){const e=new we(t),r=new Ae(e);return{seek:n=>r.seek(n),done:n=>{try{return r.seek(n),!1}catch(i){if(i instanceof E)return!0;throw i}}}}const Pe={u:{x:0,y:-1},d:{x:0,y:1},l:{x:-1,y:0},r:{x:1,y:0}},me=(t,e)=>e.map(({seek:r})=>r(t)),$e=(t,e=Pe)=>t.map(r=>e[r]??{x:0,y:0}),Ee=(t,e)=>ge(t,e).map(([r,n])=>({x:r.x+n.x,y:r.y+n.y}));function Sa({paths:t,domain:e,sources:r,goals:n=[],checks:i=[ye,ve],finalChecks:a=[],onError:s=()=>!1}){var d,p;const o=t.map(Oe);let c=0,f=r;for(;wa(o,h=>!h.done(c));){const h=me(c,o),_=Ee(f,$e(h));for(const g of i){const y=g({timestep:c,prev:f,next:_,actions:h,domain:e,sources:r,goals:n});if((d=y.errors)!=null&&d.length&&s(y))return!1}f=_,c++}for(const h of a){const _=h({timestep:c,current:f,domain:e,sources:r,goals:n});if((p=_.errors)!=null&&p.length&&s(_))return!1}}u.Chunk=be,u.DoneException=E,u.LowerOutOfRangeException=wt,u.Reader=we,u.Seeker=Ae,u.checkDomainCollision=$a,u.checkEdgeCollision=ve,u.checkGoalReached=Ea,u.checkImmediateCollision=ye,u.checkRange=Te,u.createActionMap=me,u.createOffsetMap=$e,u.defaultOffsetMap=Pe,u.processAgent=Oe,u.serialisePoint=x,u.sumPositions=Ee,u.validate=Sa,Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})});
